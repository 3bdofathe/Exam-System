<div class="container py-4">
  <h2 style="font-size: 30px; font-weight: bold;" class="mb-5">Available Exams</h2>

  <div *ngIf="isLoading" class="text-center">
    <app-loading [delay]="10000"></app-loading>
  </div>

  <!-- <div class="row g-4">
    <div *ngFor="let exam of availableExams" class="col-md-6 col-lg-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <h5 class="card-title">{{ exam.subject }}</h5>
          <p class="card-text text-muted" *ngIf="exam.description">
            {{ exam.description }}
          </p>

          <div class="exam-details">
            <div class="detail-item">
              <i class="bi bi-clock me-2"></i>
              <span>Duration: {{ exam.duration }} minutes</span>
            </div>
            <div class="detail-item">
              <i class="bi bi-bar-chart me-2"></i>
              <span>Level: {{ exam.level }}</span>
            </div>
            <div class="detail-item">
              <i class="bi bi-question-circle me-2"></i>
              <span>Questions: {{ exam.totalQuestions }}</span>
            </div>
            <div class="detail-item">
              <i class="bi bi-trophy me-2"></i>
              <span>Total Points: {{ exam.totalPoints }}</span>
            </div>
            <div class="detail-item">
              <i class="bi bi-person me-2"></i>
              <span>Created by: {{ exam.createdBy.name }}</span>
            </div>

            <div class="mt-3">
              <h6 class="mb-2">Question Types:</h6>
              <div class="question-types">
                <span
                  *ngFor="let type of exam.questionsByType | keyvalue"
                  class="badge bg-primary me-2"
                >
                  {{ type.key }}: {{ type.value }}
                </span>
              </div>
            </div>

            <div class="mt-3">
              <h6 class="mb-2">Difficulty Levels:</h6>
              <div class="difficulty-levels">
                <span
                  *ngFor="let diff of exam.questionsByDifficulty | keyvalue"
                  class="badge"
                  [ngClass]="{
                    'bg-success': diff.key === 'easy',
                    'bg-warning': diff.key === 'medium',
                    'bg-danger': diff.key === 'hard'
                  }"
                >
                  {{ diff.key }}: {{ diff.value }}
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer bg-transparent border-top-0">
          <button class="btn btn-primary w-100" (click)="startExam(exam)">
            Select Exam
          </button>
        </div>
      </div>
    </div>
  </div> -->


  <div class="floating-elements">
        <div class="floating-circle"></div>
        <div class="floating-circle"></div>
        <div class="floating-circle"></div>
    </div>

<div class="container">

        <div class="exams-grid">
            @for (exam of availableExams; track $index) {
              <div class="exam-card">
                <div class="exam-header">
                    <h2>{{ exam.subject }}</h2>
                    <p class="exam-description">{{exam.description}}</p>
                </div>

                <div class="exam-details">
                    <div class="detail-item">
                        <svg class="detail-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                        </svg>
                        <span class="detail-text">Duration: <span class="detail-value">{{exam.duration}} minutes</span></span>
                    </div>
                    
                    <div class="detail-item">
                        <svg class="detail-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span class="detail-text">Level: <span class="detail-value">{{exam.level}}</span></span>
                    </div>
                    
                    <div class="detail-item">
                        <svg class="detail-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                        </svg>
                        <span class="detail-text">Questions: <span class="detail-value">{{exam.totalQuestions}}</span></span>
                    </div>
                    
                    <div class="detail-item">
                        <svg class="detail-icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <span class="detail-text">Points: <span class="detail-value">{{exam.totalPoints}}</span></span>
                    </div>
                </div>

                <div style="display: flex; flex-direction: column;" class="question-types">
                    <div class="section-title">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                        </svg>
                        Question Types:
                    </div>
                    <div class="tags-container">
                        <span *ngFor="let type of exam.questionsByType | keyvalue" class="tag" [ngClass]="getLevelClass(type.key)">{{ type.key }}: {{ type.value }}</span>
                    </div>
                </div>

                <div style="display: flex; flex-direction: column;" class="difficulty-levels">
                    <div class="section-title">
                        <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h10a1 1 0 01.8 1.6L14.25 8l2.55 3.4A1 1 0 0116 13H6a1 1 0 00-1 1v3a1 1 0 11-2 0V6z" clip-rule="evenodd" />
                        </svg>
                        Difficulty Levels:
                    </div>
                    <div class="tags-container">
                        <span *ngFor="let diff of exam.questionsByDifficulty| keyvalue" class="tag" [ngClass]="getDiffClass(diff.key)">{{ diff.key }}: {{ diff.value }}</span>
                    </div>
                </div>

                <button class="select-btn" (click)="startExam(exam)">Select Exam</button>
            </div>
            }
        </div>
    </div>






  <div *ngIf="!isLoading && availableExams.length === 0" class="text-center">
    <p class="text-muted">No exams available at the moment.</p>
  </div>
</div>
